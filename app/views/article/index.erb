
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <h1>
      <i class="fa fa-video-camera"></i> Create a Video
      <small>Scrap, Select Template , Select Voice  and create your video here</small>
    </h1>

  </section>

  <!-- Main content -->
  <section class="content">

    <div class="row">
      <div class="col-md-12" >
        <p>
          <a class="btn btn-block btn-social btn-default" onclick="modal_open('keyword',null)">

            <i class="fa fa-search"></i>Search Article from keyword
          </a>
        </p>
       <b> or</b>
        <p>

        <div action="#" method="get" class="sidebar-form" style="margin: 0;">
          <div class="input-group">
            <input name="q" class="form-control" id="article_url" placeholder="Enter the Url of the Article" type="text">
              <span class="input-group-btn">
                <button type="submit" name="search" id="btn_article_url"  class="btn btn-flat"><i class="fa fa-sort-amount-desc"></i>SCRAP ARTICLE
                </button>
              </span>
          </div>
        </div>

        </p>
      </div>

      <div class="col-md-12" >
          <div class="box box-success show" >
            <div class="box-header with-border">
              <h3 class="box-title">Scraped data</h3>


              <!-- /.box-tools -->
            </div>
            <!-- /.box-header -->
            <div class="box-body" id="box_body">





            </div>
            <div id="btn_next">

            </div>
            <!-- /.box-body -->
          </div>
          <!-- /.box -->

      </div>


    </div>

  </section><!-- /.content -->
</div><!-- /.content-wrapper -->
<!-- Modals-->

<div id="modal_" class="modal fade" role="dialog">
  <div class="modal-dialog">
    <!-- Modal content-->

    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close btn_modal_close" >&times;</button>
        <h4 class="modal-title" id="modal_title">Modal Header</h4>
      </div>
      <div class="modal-body" id="modal_body">
        <p>Some text in the modal.</p>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default btn_modal_close" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>

<!-- end Modals-->




<!-- Bootstrap 3.3.5 -->

<script>
  var slides = [];
//  var slides1=[];
$("#btn_article_url").click(function(){

  var url = $("#article_url").val();

  var headings = [];

  $.getJSON("/user/video/article/scrap?url="+url,function(data){

   data = sort(data);

    headings.push({ "text":"no heading","lineNumber":-1,"name":"h"});
  k = 0;
    for(i=0;i<data.length;i++){

      if(data[i].name == 'h'){
        headings.push(data[i]);


      }
      if(data[i].name=='p'){
        slide = makeSlide(data,i,headings);
        slides.push(slide);
        appendSlide(k,slide);
        k++;

      }


    }
    $("#btn_next").append('<button onclick="read();">next</button>');



  });



});

function deleteSlide(id){
  alert(id);
  alert($("#h_"+id).val());

  slides[id]=null;
}


function read(){
  for(i=0;i<slides.length;i++){
    if(slides[i]!=null){



      alert($("#h_"+i).val());

      slides[i]['h'].text = $("#h_"+i).val();
      slides[i]['p'].text = $("#p_"+i).html();


    }

  }
  alert(JSON.stringify(slides));




}


function sort(data){
  tempObject ={};
  for (i = 0; i < data.length; i++) {
    for(j=0;j<data.length;j++){
      if(data[i].lineNumber < data[j].lineNumber) {
        tempObject = data[i];
        data[i] = data[j];
        data[j] = tempObject;

      }

    }
  }
  return data;

}

function makeSlide(data,i,headings){
 slide = {}
 slide['p'] = data[i];
 slide['h'] =headings[headings.length-1];
 return slide;
}

function appendSlide(id,slide){
  h = slide['h'];
  p = slide['p'];
  data = '<div class="alert alert-info alert-dismissible" ><button onclick="deleteSlide('+id+')" type="button" class="close" data-dismiss="alert" aria-hidden="true">Ã—</button><h4><div class="input-group"><div class="input-group-addon"><i class="fa fa-header"></i></div><input id="h_'+id+'" class="form-control"  value="'+ h.text+'" type="text"></div></h4><div class="input-group"><div class="input-group-addon"><i class="fa fa-header"></i></div><textarea id="p_'+id+'" class="form-control"  type="text">'+ p.text+'</textarea></div></div>'
  $('#box_body').append(data);
}
</script>

